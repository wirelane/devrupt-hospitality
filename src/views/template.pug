html
  head
    meta(name="viewport" content="width=device-width, initial-scale=1")
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous")
    link(href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css" rel="stylesheet")
    link(href="/styles/base.css" rel="stylesheet")
    link(href="/styles/" + tenant.identifier + ".css" rel="stylesheet")
    title= tenant.title

  body
    nav.navbar
      .container
        a.navbar-brand(href="#")
          img.d-inline-block-align-top(src="/images/" + tenant.identifier + ".png" alt="" width="32" height="32")
          = tenant.title

    #map

    .container
      h1 Charge. Pay. Done.
        |
        |
        span.wirelane by Wirelane

      #app
        section(v-if="activeSection === 'form'")
          p
            | Easily charge your car for
            |
            strong #{tariff.pricePerKwh} EUR/kWh without starting fee
            | . The charges will occur on your hotel invoice upon checkout.
          br

          .alert.alert-danger(role="alert" v-if="validationMessage.length")
            i.bi.bi-x-circle
            p
              | {{ validationMessage }}
              span(v-if="validationMessageShowHelpAddon")
                if poi.serviceHotline
                  | If you need assistance or feel this is a mistake, please
                  |
                  a.alert-link(href="tel:" + poi.serviceHotline) call #{poi.serviceHotline}
                  | .
                else
                  | If you need assistance or feel this is a mistake, please see the frontdesk.

          form(action="/evseId/" + poi.evseid + "/start" method="POST" @submit.prevent="submitStartForm")
            .mb-3
              label.form-label(for="inputBookingNumber") Booking Number
              input#inputBookingNumber.form-control(name="bookingNumber" v-model="bookingNumber" aria-describedby="bookingNumberHelp" required="required" minlength="6")
              #bookingNumberHelp.form-text Your booking number or reservation number.

            .mb-3.form-check
              input#tocCheck.form-check-input(type="checkbox" name="acceptedConditions" v-model="acceptedConditions")
              label.form-check-label(for="tocCheck")
                | I accept the
                |
                a(href=tenant.termsAndConditionsUrl target="_blank") Terms and Conditions
                |
                | and the
                |
                a(href=tenant.dataPrivacyUrl target="_blank") Data Privacy Agreement
                | .

            button.btn.btn-primary(type="submit") Start Charging

        section(v-if="activeSection === 'charging'")
          form(action="/evseId/" + poi.evseid + "/stop" method="POST" @submit.prevent="submitStopForm")
            .alert.alert-success(role="alert")
              i.bi.bi-check-circle
              p
                |
                | Charging session
                |
                strong {{ chargingSession.id }}
                | 
                | started on behalf of booking number
                |
                strong {{ bookingNumber }}
                | .
                br
                br
                | A reservation of 50â‚¬ has been added to your room.
                | Once the charging has finished, the correct amount will be applied.

            button.btn.btn-primary(type="submit") Stop Charging

        section(v-if="activeSection === 'receipt'")
          form(@submit="submitCloseForm")
            .alert.alert-info(role="alert")
              i.bi.bi-receipt-cutoff
              p
                |
                | Charging session
                |
                strong {{ chargingSession.id }}
                | 
                | ended after {{ chargingSession.duration }} minutes on behalf of booking number
                |
                strong {{ bookingNumber }}
                | .
                br
                br
                | A charge of {{ chargingSession.price }} EUR has been added to your room.

            button.btn.btn-primary(type="submit") Close
        
        section(v-if="activeSection === 'loading'")
          p.loading
            i.bi.bi-battery-charging
  
    script(src="https://unpkg.com/vue@next")
    script(src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.js")
    script(src="/js/app.js")
    script(src="/js/map.js")
    script.
      document.addEventListener('DOMContentLoaded', function(event) {
        setChargingPoint({
          evseId: "#{poi.evseid}",
          latitude: #{poi.latitude},
          longitude: #{poi.longitude}
        });
      });
